parameters:
- name: version
  type: string
  default: '8'

steps:
  - task: JavaToolInstaller@0
    inputs:
      versionSpec: ${{ parameters.version }}
      jdkArchitectureOption: 'x64'
      jdkSourceOption: 'PreInstalled'
# FIXME: we'd want to stop the execution of the whole pipeline, if the JDK could not be set.
#  - bash: exit 1
#    displayName: JDK ${{ parameters.version }} could not be set.
#    condition: eq(variables['Agent.JobStatus'], 'SucceededWithIssues')
  - bash: |
      echo AGENT_JOBSTATUS = $AGENT_JOBSTATUS
      if [[ "$AGENT_JOBSTATUS" == "SucceededWithIssues" ]]; then exit 1; fi
    displayName: JDK ${{ parameters.version }} could not be set.
